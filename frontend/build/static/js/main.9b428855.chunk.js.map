{"version":3,"sources":["contexts/CurrentUserContext.js","components/Card.js","images/mesto-logo.svg","components/Header.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","components/ProtectedRoute.js","components/Login.js","components/Register.js","utils/auth.js","components/InfoTooltip.js","images/registration-ok.svg","images/registration-fail.svg","components/App.js","index.js"],"names":["CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","cardDeleteButtonclassName","cardLikeButtonclassName","className","type","onClick","onCardDelete","aria-label","onCardClick","alt","name","src","link","onLikeClick","length","Header","logoPath","email","button","Main","isLoggedIn","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","onCardLike","Footer","year","Date","getFullYear","PopupWithForm","popupOpenedClass","isOpen","onClose","title","onSubmit","method","noValidate","children","value","ImagePopup","EditProfilePopup","useState","setUserName","description","setUserDescription","useEffect","event","preventDefault","onUpdateUser","id","placeholder","onChange","target","required","minLength","maxLength","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","setPlaceName","setPlaceLink","apiConfig","config","this","_url","url","_headers","res","ok","json","Promise","reject","status","fetch","headers","then","_checkResponse","data","body","JSON","stringify","newCard","place","cardId","ProtectedRoute","Component","component","to","Login","onLogin","onRegister","setUserEmail","password","setUserPassword","history","useHistory","push","evt","Register","onRegisterPopup","authApi","catch","err","console","log","token","InfoTooltip","App","isEditProfilePopupOpen","toggleEditProfilePopup","isAddPlacePopupOpen","toggleAddPlacePopup","isEditAvatarPopupOpen","toggleEditAvatarPopup","isImagePopupOpen","toggleZoomImagePopup","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","isRegistered","setIsRegistered","setEmail","isInfoTooltipOpen","setInfoTooltipOpen","tokenCheck","localStorage","getItem","getContent","closeAllPopups","getInfo","getCard","Provider","exact","path","authorize","Error","setItem","register","statusCode","unlikeCard","state","c","likeCard","deleteCard","filter","removeItem","SuccessImg","FailImg","user","updateInfo","postCard","updateAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9b428855.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n\r\n  const cardDeleteButtonclassName = (\r\n    `place__delete ${isOwn ? 'place__delete_shown' : ''}`\r\n  ); \r\n\r\n  const cardLikeButtonclassName = (\r\n    `place__like ${isLiked ? 'place__like_pressed' : ''}`\r\n  )\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onLikeClick(props.card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    props.onCardDelete(props.card);\r\n  }\r\n\r\n  return (\r\n    <div className=\"place\" key={props.card._id} >\r\n      <button \r\n        type=\"button\"\r\n        onClick={handleDeleteClick}\r\n        className={cardDeleteButtonclassName}  \r\n        aria-label=\"Удалить элемeнт\"></button>\r\n      <button \r\n        onClick={handleClick}\r\n        type=\"button\" \r\n        className=\"place__cover-button\" \r\n        aria-label=\"Увеличить картинку\">\r\n          <img className=\"place__cover\" alt={props.card.name} src={props.card.link}/>\r\n      </button>\r\n      <div className=\"place__description\">\r\n        <h2 className=\"place__title\">{props.card.name}</h2>\r\n        <button \r\n          type=\"button\"\r\n          onClick={handleLikeClick} \r\n          className={cardLikeButtonclassName} \r\n          aria-label=\"Добавить в избранное\"></button>\r\n        <p className=\"place__like-count\">{props.card.likes.length}</p>\r\n      </div> \r\n    </div>\r\n  )\r\n} \r\n\r\nexport default Card","export default __webpack_public_path__ + \"static/media/mesto-logo.c2821b38.svg\";","import logoPath from '../images/mesto-logo.svg';\r\n\r\nfunction Header(props) {\r\n\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={logoPath} alt=\"Логотип сервиса место\" />\r\n      <div className=\"header__infobox\">\r\n        <p className=\"header__email\">{props.email}</p>\r\n        <button\r\n        className=\"header__button\"\r\n        type=\"button\"\r\n        onClick={props.onClick}>{props.button}</button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;  ","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Card from './Card'; \r\nimport Header from './Header';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <Header\r\n        button=\"Выйти\"\r\n        onClick = {props.onClick}\r\n        isLoggedIn = {props.isLoggedIn}\r\n        email={props.email}\r\n      />\r\n\r\n      <section className=\"profile\">\r\n        <div \r\n          onClick={props.onEditAvatar}\r\n          className=\"profile__userpic-edit-button\"></div>\r\n        <img \r\n          src={currentUser.avatar}\r\n          className=\"profile__pic\" \r\n          alt=\"Фото пользователя\" />\r\n        <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n        <button \r\n          type=\"button\" \r\n          onClick={props.onEditProfile} \r\n          className=\"profile__edit-button\" \r\n          aria-label=\"Редактировать профиль\" />\r\n        <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n        <button \r\n          type=\"button\"  \r\n          onClick={props.onAddPlace} \r\n          className=\"profile__add-button\"\r\n          aria-label=\"Добавить новое место\" />\r\n      </section>\r\n\r\n      <section className=\"places\">\r\n        {props.cards.map((card) => (\r\n          <Card \r\n            card={card} \r\n            key={card._id} \r\n            onCardClick={props.onCardClick}\r\n            onLikeClick={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}/>\r\n        ))}\r\n      </section>\r\n\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Main; ","function Footer() {\r\n  \r\n   const newDate = new Date()\r\n   const year = newDate.getFullYear();\r\n\r\n   return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">© {year} Mesto Russia</p>\r\n    </footer>\r\n  )\r\n}\r\n  \r\n  export default Footer; ","function PopupWithForm(props) {\r\n\r\n  const popupOpenedClass = props.isOpen ? \"popup_opened\" : '';\r\n\r\n  return (\r\n    <section className={`popup popup_${props.name} ${popupOpenedClass}`}>\r\n    <div className={`popup__container popup__container-${props.name}`}>\r\n      <button type=\"button\" \r\n        onClick={props.onClose}\r\n        className=\"popup__close\" \r\n        aria-label=\"Закрыть форму\" />\r\n      <h3 className=\"popup__title\">{props.title}</h3>\r\n      <form \r\n        onSubmit={props.onSubmit}\r\n        name=\"editValues\" \r\n        method=\"post\" \r\n        className={`popup__form popup__form-${props.name}`} \r\n        noValidate>\r\n        {props.children}\r\n        <input name=\"submit\" type=\"submit\" value=\"Сохранить\" className=\"popup__submit-button\" /> \r\n      </form>\r\n    </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","function ImagePopup(props) {\r\n\r\n  const popupOpenedClass = props.isOpen ? \"popup_opened\" : '';\r\n  \r\n  return (\r\n    <section className={`popup popup_zoom ${popupOpenedClass}`}>    \r\n      <div className=\"popup__picture\">\r\n        <button type=\"button\"\r\n          onClick={props.onClose} \r\n          className=\"popup__close\" \r\n          aria-label=\"Закрыть форму\" />\r\n        <img className=\"popup__img\" alt={`${props.card.name}`} src={`${props.card.link}`} />\r\n        <p className=\"popup__caption\"> {props.card.name} </p>\r\n    </div>\r\n  </section>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setUserName] = React.useState('');\r\n  const [description, setUserDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setUserName(currentUser.name);\r\n    setUserDescription(currentUser.about);\r\n  }, [currentUser])\r\n\r\n  \r\n  function changeUserName(name) {\r\n    setUserName(name.target.value)\r\n  }\r\n \r\n  function changeUserInfo(description) {\r\n    setUserDescription(description.target.value)\r\n  }\r\n   \r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm \r\n      name='profile' \r\n      title='Редактировать профиль'\r\n      isOpen = {props.isOpen}\r\n      onClose = {props.onClose}\r\n      onSubmit = {handleSubmit}>\r\n\r\n      <input \r\n        type=\"text\" \r\n        className=\"popup__input-field popup__input-field_value_name\" \r\n        id=\"profile-username\" \r\n        name=\"name\" \r\n        placeholder=\"Имя\"\r\n        value={name}\r\n        onChange={changeUserName}\r\n        required minLength={2} \r\n        maxLength={40} />\r\n      <span id=\"profile-username-error\" className=\"popup__input-field popup__input-field_error\" />\r\n      \r\n      <input \r\n        type=\"text\" \r\n        className=\"popup__input-field popup__input-field_value_job\" \r\n        id=\"profile-job\" \r\n        name=\"about\" \r\n        value={description}\r\n        onChange={changeUserInfo}\r\n        placeholder=\"О себе\" \r\n        required minLength={2} \r\n        maxLength={200} />\r\n      <span id=\"profile-job-error\" className=\"popup__input-field popup__input-field_error\" />\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = React.useRef()\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    props.onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm \r\n    name='avatar'\r\n    title='Обновить аватар'\r\n    isOpen = {props.isOpen}\r\n    onClose = {props.onClose}\r\n    onSubmit = {handleSubmit}>\r\n\r\n      <input \r\n        ref={avatarRef}\r\n        type=\"url\" \r\n        className=\"popup__input-field popup__input-field_value_userpic\" \r\n        id=\"userpic\" \r\n        name=\"avatar\" \r\n        placeholder=\"Ссылка\" \r\n        required />\r\n      <span id=\"userpic-error\" className=\"popup__input-field popup__input-field_error\" />\r\n    </PopupWithForm>\r\n  )  \r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n  const [name, setPlaceName] = React.useState('');\r\n  const [link, setPlaceLink] = React.useState('');\r\n\r\n\r\n  function changePlaceName(name) {\r\n    setPlaceName(name.target.value)\r\n  }\r\n\r\n  function changePlaceLink(link) {\r\n    setPlaceLink(link.target.value)\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    props.onAddPlace({\r\n      name,\r\n      link\r\n    });\r\n  }\r\n\r\n\r\n  return (\r\n    <PopupWithForm \r\n    name='place' \r\n    title='Новое место'\r\n    onSubmit = {handleSubmit}\r\n    isOpen = {props.isOpen}\r\n    onClose = {props.onClose}>\r\n\r\n      <input\r\n      type=\"text\" \r\n      className=\"popup__input-field popup__input-field_value_place\" \r\n      id=\"place-name\" \r\n      name=\"place\"\r\n      value={name} \r\n      onChange={changePlaceName}\r\n      placeholder=\"Название\" \r\n      required minLength={2} \r\n      maxLength={30} \r\n      />\r\n      <span id=\"place-name-error\" className=\"popup__input-field popup__input-field_error\" />\r\n      \r\n      <input \r\n      type=\"url\" \r\n      className=\"popup__input-field popup__input-field_value_placeurl\" \r\n      id=\"place-url\" \r\n      value={link} \r\n      onChange={changePlaceLink}\r\n      name=\"link\" \r\n      placeholder=\"Ссылка на картинку\"\r\n      required \r\n      />\r\n      <span id=\"place-url-error\" className=\"popup__input-field popup__input-field_error\" />\r\n    </PopupWithForm>   \r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","class Api {\r\n  constructor(config){\r\n\t\tthis._url = config.url;\r\n    this._headers = {\r\n      \"Content-Type\": \"application/json\"\r\n    };\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status}`);\r\n  }\r\n\r\n  getInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"GET\",\r\n      headers: this._headers\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  updateInfo(data) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data)\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  updateAvatar(data) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data)\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getCard() {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  generateCard(newCard) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: newCard.place,\r\n        link: newCard.link,\r\n      })\r\n    }).then(this._checkResponse);\r\n  }\r\n  \r\n\r\n  postCard(data) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data)\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  deleteCard(cardId){\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    })\r\n    .then((res) => {\r\n      if(!res.ok) {\r\n        return Promise.reject('Не удалось удалить карточку')\r\n      }\r\n    })\r\n  }\r\n  \r\n  likeCard(cardId) {\r\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers, \r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  unlikeCard(cardId) {\r\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nexport const apiConfig = new Api({\r\n  url: \"http://spaceboss.mesto.nomoredomains.club\"\r\n});\r\n   \r\n","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.isLoggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport Header from './Header';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\n\r\nfunction Login({ onLogin, onRegister }) {\r\n\r\n  const [email, setUserEmail] = React.useState('');\r\n  const [password, setUserPassword] = React.useState('');\r\n  const history = useHistory();\r\n\r\n  function handleEmailInput(evt) {\r\n    setUserEmail(evt.target.value)\r\n  }\r\n\r\n  function handlePasswordInput(evt) {\r\n    setUserPassword(evt.target.value)\r\n  }\r\n\r\n  function handleFormSubmit(evt) {\r\n    evt.preventDefault(); \r\n    const userData = {\r\n      email,\r\n      password\r\n    }\r\n    onLogin(userData)\r\n  }\r\n\r\n  function handleRedirect() {\r\n    history.push(\"/sign-up\")\r\n  }\r\n \r\n\r\n  return(\r\n    <>\r\n    <Header \r\n    button=\"Регистрация\"\r\n    onClick={handleRedirect} \r\n    />\r\n \r\n    <section className=\"auth\">\r\n      <div className=\"auth__container\">\r\n        <h3 className=\"auth__title\">Вход</h3>\r\n          <form \r\n          className=\"auth__form\"\r\n          onSubmit={handleFormSubmit}>\r\n            <input \r\n            onChange = {handleEmailInput}\r\n            value = {email}\r\n            type=\"text\" \r\n            className=\"auth__input-field\" \r\n            id=\"auth-email\" \r\n            name=\"email\" \r\n            placeholder=\"Email\" \r\n            required minLength=\"2\" \r\n            maxLength=\"40\"/>\r\n\r\n            <input \r\n            onChange = {handlePasswordInput}\r\n            value = {password}\r\n            type=\"password\" \r\n            className=\"auth__input-field\"\r\n            id=\"auth-password\" \r\n            name=\"password\" \r\n            placeholder=\"Пароль\" \r\n            required \r\n            minLength=\"8\" \r\n            maxLength=\"40\"/>\r\n\r\n            <input name=\"submit\" type=\"submit\" value=\"Войти\" className=\"auth__submit-button\"/>\r\n          </form> \r\n        </div>\r\n    </section>\r\n    </>\r\n  )\r\n\r\n}\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport Header from './Header';\r\n\r\n\r\nfunction Register({onRegister, onRegisterPopup}) {\r\n\r\n  const [email, setUserEmail] = React.useState('');\r\n  const [password, setUserPassword] = React.useState('');\r\n  const history = useHistory();\r\n\r\n  function handleEmailInput(evt) {\r\n    setUserEmail(evt.target.value)\r\n  }\r\n\r\n  function handlePasswordInput(evt) {\r\n    setUserPassword(evt.target.value)\r\n  }\r\n\r\n  function handleFormSubmit(evt) {\r\n    evt.preventDefault(); \r\n    onRegister({\r\n      password: password,\r\n      email: email\r\n    })\r\n    onRegisterPopup();\r\n  }\r\n\r\n  function handleRedirect() {\r\n    history.push(\"/sign-in\")\r\n  }\r\n \r\n  return(\r\n    <>\r\n    <Header button=\"Войти\" onClick={handleRedirect} />\r\n\r\n    <section className=\"auth\">\r\n      <div className=\"auth__container\">\r\n        <h3 className=\"auth__title\">Регистрация</h3>\r\n          <form \r\n          className=\"auth__form\"\r\n          onSubmit={handleFormSubmit}>\r\n            <input \r\n            onChange={handleEmailInput}\r\n            value={email}\r\n            type=\"text\"\r\n            className=\"auth__input-field\" \r\n            id=\"auth-email\" \r\n            name=\"email\" \r\n            placeholder=\"Email\" \r\n            required minLength=\"2\" \r\n            maxLength=\"40\"/>\r\n\r\n            <input \r\n            onChange={handlePasswordInput}\r\n            value={password}\r\n            type=\"password\" \r\n            className=\"auth__input-field\" \r\n            id=\"auth-password\"\r\n            name=\"password\"\r\n            placeholder=\"Пароль\"\r\n            required minLength=\"8\"\r\n            maxLength=\"40\"/>\r\n\r\n            <input name=\"submit\" type=\"submit\" value=\"Зарегистрироаться\" className=\"auth__submit-button\"/>\r\n          </form> \r\n          <div className=\"auth__signin\">\r\n            <Link to=\"/sign-in\" className=\"auth__signin-link\"> Уже зарегистрированы? Войти </Link>\r\n          </div>\r\n      </div>\r\n\r\n    </section> \r\n    </>\r\n )\r\n\r\n}\r\n\r\nexport default Register;","class AuthApi {\r\n  constructor(config){\r\n    this._url = config.url;\r\n    this._headers = {\r\n      \"Accept\": \"application/json\",\r\n      \"Content-Type\": \"application/json\", \r\n    };\r\n  }\r\n\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status}`);\r\n  };\r\n\r\n\r\n  register(email, password) {\r\n    return fetch(`${this._url}/signup`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({password, email})\r\n    }).then(this._checkResponse)\r\n    .catch((err) => {\r\n      console.log(err);\r\n      return Promise.reject(err);\r\n    });\r\n  };\r\n\r\n  authorize(email, password) {\r\n    return fetch(`${this._url}/signin`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({email, password})\r\n    }).then(this._checkResponse);\r\n  };\r\n\r\n  getContent(token) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`,\r\n      }\r\n    }).then(this._checkResponse)\r\n  };\r\n}\r\n\r\n\r\nexport const authApi = new AuthApi({\r\n  url: \"http://spaceboss.mesto.nomoredomains.club\",\r\n});","import React from 'react';\r\n\r\n\r\nfunction InfoTooltip(props) {\r\n  const popupOpenedClass = props.isOpen ? \"popup_opened\" : '';\r\n\r\n  return (\r\n    <div className={`popup popup_infotooltip ${popupOpenedClass}`}>\r\n        <div className={`popup__container popup__container-auth-feedback`}>\r\n          <button type=\"button\"\r\n          onClick={props.onClose} \r\n          className=\"popup__close\" \r\n          aria-label=\"Закрыть форму\" />\r\n\r\n          <img \r\n          className=\"popup__img-auth-feedback\"\r\n          src={props.src}\r\n          alt ='Статус авторизации'/>\r\n\r\n          <h3 className=\"popup__title popup__title_centered\">\r\n            {props.title}</h3>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;","export default __webpack_public_path__ + \"static/media/registration-ok.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/registration-fail.d4ce2a26.svg\";","import React, {useEffect} from 'react';\r\nimport { Route, Switch, useHistory, Redirect } from 'react-router-dom';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport { apiConfig } from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport { authApi} from '../utils/auth';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport SuccessImg from '../images/registration-ok.svg';\r\nimport FailImg from '../images/registration-fail.svg';\r\n\r\n\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, toggleEditProfilePopup] = React.useState(false);\r\n  const [isAddPlacePopupOpen, toggleAddPlacePopup] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, toggleEditAvatarPopup] = React.useState(false);\r\n  const [isImagePopupOpen, toggleZoomImagePopup] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({name: '', link: ''});\r\n  const [currentUser, setCurrentUser] = React.useState({avatar: '', name: '', about: ''});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [isLoggedIn, setLoggedIn] = React.useState(false);\r\n  const [isRegistered, setIsRegistered] = React.useState(false);\r\n  const [email, setEmail] = React.useState('');\r\n\r\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\r\n  const history = useHistory();\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (isLoggedIn) {\r\n      history.push(\"/main\");\r\n    }\r\n  }, [isLoggedIn, history]);\r\n\r\n\r\n  useEffect(() => {\r\n    tokenCheck()\r\n  });\r\n   \r\n  \r\n  useEffect(() => {\r\n    setInfoTooltipOpen(false);\r\n    if (isRegistered) {\r\n      history.push('/sign-in');\r\n    }\r\n  }, [isRegistered, history])\r\n\r\n\r\n  const handleLogin = ({ email, password }) => {\r\n    return authApi.authorize(email, password)\r\n      .then((data) => {\r\n        if (!data) throw new Error('Неверные имя пользователя или пароль')\r\n        if (data.token) {\r\n          setLoggedIn(true)\r\n          localStorage.setItem('token', data.token)\r\n          return;\r\n        }\r\n      })\r\n  }\r\n\r\n\r\n  const handleRegister = ({ email, password}) => {\r\n    return authApi.register(email, password)\r\n    .then((res) => {\r\n      if (!res || res.statusCode === 400) throw new Error('Что-то пошло не так');\r\n      setIsRegistered(true);\r\n      setInfoTooltipOpen(true)\r\n      return res;\r\n    }).catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n\r\n  const tokenCheck = () => {\r\n    if (localStorage.getItem('token')) {\r\n      let token = localStorage.getItem('token');\r\n      authApi.getContent(token).then(({ data }) => {\r\n        if (data.email) {\r\n          setLoggedIn(true);\r\n          setEmail(data.email);\r\n        }\r\n        console.log(data.email);\r\n      });\r\n    }\r\n  }\r\n\r\n  function signOut() {\r\n    localStorage.removeItem('token');\r\n    setLoggedIn(false);\r\n  }\r\n\r\n  \r\n  function onRegisterPopup() {\r\n    setInfoTooltipOpen(true);\r\n  }\r\n\r\n\r\n  React.useEffect(() => {\r\n    apiConfig.getInfo()\r\n    .then((res) => {\r\n      setCurrentUser(res)\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }, []);\r\n\r\n\r\n  React.useEffect(() => {\r\n    apiConfig.getCard()\r\n    .then((res) => {\r\n      setCards(res);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }, []);\r\n  \r\n\r\n  function handleAddPlaceSubmit(data) {\r\n    apiConfig.postCard(data)\r\n    .then((newCard) => {\r\n      setCards([newCard, ...cards]);\r\n      closeAllPopups();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }\r\n \r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    if (!isLiked) {\r\n      apiConfig.likeCard(card._id)\r\n      .then((newCard) => {\r\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    }\r\n    else {\r\n      apiConfig.unlikeCard(card._id)\r\n      .then((newCard) => {\r\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  function handleCardDelete(card) {\r\n    apiConfig.deleteCard(card._id)\r\n    .then(() => {\r\n      setCards(cards.filter((c) => c._id !== card._id));\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n\r\n  function handleUpdateUser(user) {\r\n    if (user.name !== '' && user.about !== '') {\r\n      apiConfig.updateInfo(user)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    }\r\n  }\r\n\r\n  function handleUpdateAvatar(user) {\r\n    if (user.avatar !== '') {\r\n      apiConfig.updateAvatar(user)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });  \r\n   }  \r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    toggleEditAvatarPopup(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    toggleEditProfilePopup(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    toggleAddPlacePopup(true);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    toggleAddPlacePopup(false);\r\n    toggleEditAvatarPopup(false);\r\n    toggleEditProfilePopup(false);\r\n    toggleZoomImagePopup(false);\r\n    setSelectedCard({name: '', link: ''});\r\n    setInfoTooltipOpen(false);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    if (card.link !== '' && card.name !== '') {\r\n      setSelectedCard({name: card.name, link: card.link});\r\n      toggleZoomImagePopup(true);\r\n    }\r\n  }\r\n  \r\n\r\n  return (\r\n  \r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className = \"page\">\r\n\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            {isLoggedIn ? <Redirect to=\"/main\" /> : <Redirect to=\"/sign-up\" />}\r\n          </Route>\r\n\r\n          <Route path = \"/sign-in\">\r\n            <Login   \r\n              onLogin = {handleLogin}\r\n              isRegistered = {isRegistered}\r\n              isInfoTooltipOpen = {isInfoTooltipOpen}\r\n              onRegisterPopup = {onRegisterPopup}\r\n            />\r\n          </Route>\r\n\r\n          <Route path = \"/sign-up\">\r\n            <Register\r\n              onRegister = {handleRegister}\r\n              onRegisterPopup = {onRegisterPopup}\r\n            />\r\n          </Route>\r\n\r\n          <ProtectedRoute \r\n            path=\"/main\"\r\n            isLoggedIn = {isLoggedIn}\r\n            component = {Main}          \r\n            onEditProfile = {handleEditProfileClick}\r\n            onEditAvatar = {handleEditAvatarClick}\r\n            onAddPlace = {handleAddPlaceClick}\r\n            onCardClick = {handleCardClick}\r\n            onCardLike = {handleCardLike}\r\n            onCardDelete = {handleCardDelete}\r\n            cards = {cards}\r\n            email = {email}\r\n            onClick = {signOut}\r\n          />\r\n\r\n        </Switch>\r\n\r\n        <Footer />\r\n\r\n        <InfoTooltip \r\n          isOpen = {isInfoTooltipOpen}\r\n          onClose = {closeAllPopups}\r\n          title = {\r\n            isRegistered ? 'Вы успешно зарегистрировались!'\r\n            : 'Что-то пошло не так! Попробуйте ещё раз.'\r\n          }\r\n          src={isRegistered ? SuccessImg : FailImg}\r\n        /> \r\n\r\n\r\n        <EditProfilePopup\r\n          isOpen = {isEditProfilePopupOpen}\r\n          onClose = {closeAllPopups}\r\n          onUpdateUser = {handleUpdateUser}\r\n        />\r\n\r\n        <AddPlacePopup\r\n          isOpen = {isAddPlacePopupOpen}\r\n          onClose = {closeAllPopups}\r\n          onAddPlace = {handleAddPlaceSubmit}\r\n        />\r\n\r\n        <EditAvatarPopup\r\n          isOpen = {isEditAvatarPopupOpen}\r\n          onClose = {closeAllPopups}\r\n          onUpdateAvatar = {handleUpdateAvatar}      \r\n        />  \r\n\r\n        <PopupWithForm \r\n          name='delete-confirmation' \r\n          title='Вы уверены?'\r\n          onClose = {closeAllPopups}> \r\n          <button type=\"button\" className=\"popup__submit-button popup__submit-button_delete\">Да</button>\r\n        </PopupWithForm>\r\n\r\n        <ImagePopup \r\n          isOpen  = {isImagePopupOpen}\r\n          card    = {selectedCard}\r\n          onClose = {closeAllPopups}\r\n        />\r\n\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport {BrowserRouter} from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n "],"sourceRoot":""}